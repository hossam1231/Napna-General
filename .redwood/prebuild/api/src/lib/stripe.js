import Stripe from 'stripe';
export const stripe = new Stripe(process.env.STRIPE_SK);
export const handleStripeWebhooks = (event, context, webhooksObj) => {
  let stripeEvent;
  try {
    const sig = event.headers['stripe-signature'];
    stripeEvent = stripe.webhooks.constructEvent(event.body, sig, process.env.STRIPE_WEBHOOK_SK);
    let results = null;
    if (typeof webhooksObj[stripeEvent.type] !== 'undefined') {
      results = webhooksObj[stripeEvent.type](event, context);
    }
    return results;
  } catch (error) {
    console.log(error);
    throw error;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdHJpcGUiLCJzdHJpcGUiLCJwcm9jZXNzIiwiZW52IiwiU1RSSVBFX1NLIiwiaGFuZGxlU3RyaXBlV2ViaG9va3MiLCJldmVudCIsImNvbnRleHQiLCJ3ZWJob29rc09iaiIsInN0cmlwZUV2ZW50Iiwic2lnIiwiaGVhZGVycyIsIndlYmhvb2tzIiwiY29uc3RydWN0RXZlbnQiLCJib2R5IiwiU1RSSVBFX1dFQkhPT0tfU0siLCJyZXN1bHRzIiwidHlwZSIsImVycm9yIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2FwaS9zcmMvbGliL3N0cmlwZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RyaXBlIGZyb20gJ3N0cmlwZSdcblxuZXhwb3J0IGNvbnN0IHN0cmlwZSA9IG5ldyBTdHJpcGUocHJvY2Vzcy5lbnYuU1RSSVBFX1NLKVxuXG5leHBvcnQgY29uc3QgaGFuZGxlU3RyaXBlV2ViaG9va3MgPSAoZXZlbnQsIGNvbnRleHQsIHdlYmhvb2tzT2JqKSA9PiB7XG4gIGxldCBzdHJpcGVFdmVudFxuICB0cnkge1xuICAgIGNvbnN0IHNpZyA9IGV2ZW50LmhlYWRlcnNbJ3N0cmlwZS1zaWduYXR1cmUnXVxuICAgIHN0cmlwZUV2ZW50ID0gc3RyaXBlLndlYmhvb2tzLmNvbnN0cnVjdEV2ZW50KFxuICAgICAgZXZlbnQuYm9keSxcbiAgICAgIHNpZyxcbiAgICAgIHByb2Nlc3MuZW52LlNUUklQRV9XRUJIT09LX1NLXG4gICAgKVxuXG4gICAgbGV0IHJlc3VsdHMgPSBudWxsXG4gICAgaWYgKHR5cGVvZiB3ZWJob29rc09ialtzdHJpcGVFdmVudC50eXBlXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJlc3VsdHMgPSB3ZWJob29rc09ialtzdHJpcGVFdmVudC50eXBlXShldmVudCwgY29udGV4dClcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLE1BQU0sTUFBTSxRQUFRO0FBRTNCLE9BQU8sTUFBTUMsTUFBTSxHQUFHLElBQUlELE1BQU0sQ0FBQ0UsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFNBQVMsQ0FBQztBQUV2RCxPQUFPLE1BQU1DLG9CQUFvQixHQUFHLENBQUNDLEtBQUssRUFBRUMsT0FBTyxFQUFFQyxXQUFXLEtBQUs7RUFDbkUsSUFBSUMsV0FBVztFQUNmLElBQUk7SUFDRixNQUFNQyxHQUFHLEdBQUdKLEtBQUssQ0FBQ0ssT0FBTyxDQUFDLGtCQUFrQixDQUFDO0lBQzdDRixXQUFXLEdBQUdSLE1BQU0sQ0FBQ1csUUFBUSxDQUFDQyxjQUFjLENBQzFDUCxLQUFLLENBQUNRLElBQUksRUFDVkosR0FBRyxFQUNIUixPQUFPLENBQUNDLEdBQUcsQ0FBQ1ksaUJBQWlCLENBQzlCO0lBRUQsSUFBSUMsT0FBTyxHQUFHLElBQUk7SUFDbEIsSUFBSSxPQUFPUixXQUFXLENBQUNDLFdBQVcsQ0FBQ1EsSUFBSSxDQUFDLEtBQUssV0FBVyxFQUFFO01BQ3hERCxPQUFPLEdBQUdSLFdBQVcsQ0FBQ0MsV0FBVyxDQUFDUSxJQUFJLENBQUMsQ0FBQ1gsS0FBSyxFQUFFQyxPQUFPLENBQUM7SUFDekQ7SUFDQSxPQUFPUyxPQUFPO0VBQ2hCLENBQUMsQ0FBQyxPQUFPRSxLQUFLLEVBQUU7SUFDZEMsT0FBTyxDQUFDQyxHQUFHLENBQUNGLEtBQUssQ0FBQztJQUNsQixNQUFNQSxLQUFLO0VBQ2I7QUFDRixDQUFDIn0=
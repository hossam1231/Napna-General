import { stripe } from "../../lib/stripe";
export const products = async ({
  type = 'one_time'
}) => {
  // Get a list of active products
  const products = await stripe.products.list({
    active: true
  });
  const itemList = [];
  for (const product of products.data) {
    // Get a list of prices relating to product
    const prices = await stripe.prices.list({
      type: type,
      product: product.id
    });
    const price = prices.data[0];

    // ignore prices with the "wrong" type
    if (typeof price !== 'undefined') {
      itemList.push({
        id: price.id,
        name: product.name,
        description: product.description,
        image: product.images[0],
        price: price.unit_amount,
        type: price.type
      });
    }
  }
  return itemList;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdHJpcGUiLCJwcm9kdWN0cyIsInR5cGUiLCJsaXN0IiwiYWN0aXZlIiwiaXRlbUxpc3QiLCJwcm9kdWN0IiwiZGF0YSIsInByaWNlcyIsImlkIiwicHJpY2UiLCJwdXNoIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiaW1hZ2UiLCJpbWFnZXMiLCJ1bml0X2Ftb3VudCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2FwaS9zcmMvc2VydmljZXMvcHJvZHVjdHMvcHJvZHVjdHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3RyaXBlIH0gZnJvbSAnc3JjL2xpYi9zdHJpcGUnXG5cbmV4cG9ydCBjb25zdCBwcm9kdWN0cyA9IGFzeW5jICh7IHR5cGUgPSAnb25lX3RpbWUnIH0pID0+IHtcbiAgLy8gR2V0IGEgbGlzdCBvZiBhY3RpdmUgcHJvZHVjdHNcbiAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBzdHJpcGUucHJvZHVjdHMubGlzdCh7XG4gICAgYWN0aXZlOiB0cnVlLFxuICB9KVxuXG4gIGNvbnN0IGl0ZW1MaXN0ID0gW11cbiAgZm9yIChjb25zdCBwcm9kdWN0IG9mIHByb2R1Y3RzLmRhdGEpIHtcbiAgICAvLyBHZXQgYSBsaXN0IG9mIHByaWNlcyByZWxhdGluZyB0byBwcm9kdWN0XG4gICAgY29uc3QgcHJpY2VzID0gYXdhaXQgc3RyaXBlLnByaWNlcy5saXN0KHtcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICBwcm9kdWN0OiBwcm9kdWN0LmlkLFxuICAgIH0pXG5cbiAgICBjb25zdCBwcmljZSA9IHByaWNlcy5kYXRhWzBdXG5cbiAgICAvLyBpZ25vcmUgcHJpY2VzIHdpdGggdGhlIFwid3JvbmdcIiB0eXBlXG4gICAgaWYgKHR5cGVvZiBwcmljZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGl0ZW1MaXN0LnB1c2goe1xuICAgICAgICBpZDogcHJpY2UuaWQsXG4gICAgICAgIG5hbWU6IHByb2R1Y3QubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHByb2R1Y3QuZGVzY3JpcHRpb24sXG4gICAgICAgIGltYWdlOiBwcm9kdWN0LmltYWdlc1swXSxcbiAgICAgICAgcHJpY2U6IHByaWNlLnVuaXRfYW1vdW50LFxuICAgICAgICB0eXBlOiBwcmljZS50eXBlLFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaXRlbUxpc3Rcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsTUFBTTtBQUVmLE9BQU8sTUFBTUMsUUFBUSxHQUFHLE9BQU87RUFBRUMsSUFBSSxHQUFHO0FBQVcsQ0FBQyxLQUFLO0VBQ3ZEO0VBQ0EsTUFBTUQsUUFBUSxHQUFHLE1BQU1ELE1BQU0sQ0FBQ0MsUUFBUSxDQUFDRSxJQUFJLENBQUM7SUFDMUNDLE1BQU0sRUFBRTtFQUNWLENBQUMsQ0FBQztFQUVGLE1BQU1DLFFBQVEsR0FBRyxFQUFFO0VBQ25CLEtBQUssTUFBTUMsT0FBTyxJQUFJTCxRQUFRLENBQUNNLElBQUksRUFBRTtJQUNuQztJQUNBLE1BQU1DLE1BQU0sR0FBRyxNQUFNUixNQUFNLENBQUNRLE1BQU0sQ0FBQ0wsSUFBSSxDQUFDO01BQ3RDRCxJQUFJLEVBQUVBLElBQUk7TUFDVkksT0FBTyxFQUFFQSxPQUFPLENBQUNHO0lBQ25CLENBQUMsQ0FBQztJQUVGLE1BQU1DLEtBQUssR0FBR0YsTUFBTSxDQUFDRCxJQUFJLENBQUMsQ0FBQyxDQUFDOztJQUU1QjtJQUNBLElBQUksT0FBT0csS0FBSyxLQUFLLFdBQVcsRUFBRTtNQUNoQ0wsUUFBUSxDQUFDTSxJQUFJLENBQUM7UUFDWkYsRUFBRSxFQUFFQyxLQUFLLENBQUNELEVBQUU7UUFDWkcsSUFBSSxFQUFFTixPQUFPLENBQUNNLElBQUk7UUFDbEJDLFdBQVcsRUFBRVAsT0FBTyxDQUFDTyxXQUFXO1FBQ2hDQyxLQUFLLEVBQUVSLE9BQU8sQ0FBQ1MsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUN4QkwsS0FBSyxFQUFFQSxLQUFLLENBQUNNLFdBQVc7UUFDeEJkLElBQUksRUFBRVEsS0FBSyxDQUFDUjtNQUNkLENBQUMsQ0FBQztJQUNKO0VBQ0Y7RUFFQSxPQUFPRyxRQUFRO0FBQ2pCLENBQUMifQ==